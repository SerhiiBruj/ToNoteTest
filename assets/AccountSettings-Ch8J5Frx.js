import{r as i,u as k,b as v,j as e,e as C}from"./index-RIUbxqxE.js";const L=()=>{const[d,u]=i.useState([""]),[r,x]=i.useState(!1),s=k(t=>t.userData),[c,h]=i.useState(!1),[a,m]=i.useState({oldPassword:"",newPassword:""}),g=i.useCallback(t=>{m({...a,[t.target.name]:t.target.value})},[]);i.useEffect(()=>{d[0]===""&&!localStorage.getItem("beLocal")&&(async()=>{try{console.log("reqForLastTimeSeenData");const n=await C.get("http://localhost:3000/entries",{headers:{userName:s.userName}});let p=new Array(n.data.length);for(let o=0;o<n.data.length;o++){let{client_time:S}=n.data[o];const l=new Date(S),j=String(l.getDate()).padStart(2,"0"),y=String(l.getMonth()+1).padStart(2,"0"),b=l.getFullYear(),f=String(l.getHours()).padStart(2,"0"),P=String(l.getMinutes()).padStart(2,"0"),N=`${f}:${P}  ${j}.${y}.${b}`;p.push(N)}u(p.filter(o=>o!=="").slice(0,10))}catch(n){console.log(n)}})()},[]);const w=v();return e.jsxs("div",{className:"settingsSection",children:[e.jsx("h1",{style:{fontSize:"40px"},children:"Account Settings"}),e.jsxs("p",{children:["Email: ",e.jsx("strong",{children:s==null?void 0:s.email})]}),e.jsxs("p",{children:["Username: ",e.jsx("strong",{children:s==null?void 0:s.userName})]}),e.jsxs("label",{style:{display:"flex",alignItems:"flex-start",flexDirection:"column"},children:[e.jsx("strong",{children:"Change password"}),e.jsx("div",{className:"passwordChange",style:{marginTop:"20px",display:"flex",alignItems:"center"},children:e.jsx("input",{type:"text",placeholder:"Old password",name:"oldPassword",style:{background:"lightgray",userSelect:"none",width:"fit-content",WebkitTextSecurity:c?"none":"disc"},className:"submit inputpas",value:a.oldPassword,onChange:t=>g(t)})}),e.jsx("input",{type:"text",placeholder:"New password",name:"newPassword",style:{background:"lightgray",userSelect:"none",margin:"20px 0px 20px 0px",width:"fit-content",WebkitTextSecurity:c?"none":"disc"},className:"submit inputpas",value:a.newPassword,onChange:t=>g(t)})]}),(a.newPassword||a.oldPassword)&&e.jsx("span",{style:{cursor:"pointer",textDecoration:"underline",width:"fit-content",userSelect:"none"},onClick:()=>h(!c),children:c?"Hide it":"Make it visible"}),e.jsx("br",{}),a.newPassword&&a.oldPassword&&e.jsx("button",{className:"submit",style:{marginTop:"20px",cursor:"pointer",width:"fit-content"},children:"Change"}),e.jsxs("div",{className:"lastTimeSeen",children:[e.jsx("br",{}),e.jsx("strong",{children:"Last time seen:"})," ",d[0],e.jsx("br",{}),e.jsx("b",{style:{cursor:"pointer",lineHeight:"50px",textDecoration:"underline"},onClick:()=>x(!r),children:r?"Hide":"Show  more attendance dates"}),e.jsx("div",{style:{transform:r?"scaleY(1)":"scaleY(0)",height:r?"auto":"0",transition:"all ease 0.1s",opacity:r?"1":"0",transformOrigin:"top",background:"#d3d3d31a",width:"fit-content",padding:"10px",borderRadius:"20px",outline:"1px solid gray"},children:d.map((t,n)=>e.jsx("div",{children:e.jsx("span",{className:"marker",children:t})},n))})]}),e.jsx("br",{}),e.jsx("button",{style:{marginTop:"20px",padding:"10px 20px",width:"fit-content"},onClick:()=>{localStorage.removeItem("token"),w("/authentification")},className:"submit",children:"Log out"})]})};export{L as default};
