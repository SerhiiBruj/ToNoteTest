import{e as j,r,k as N,j as s}from"./index-B3Eo0hN7.js";import{u as b}from"./useLocalStorage-D42F-wsB.js";import{A as f}from"./arrow-573U6ypp.js";const T=()=>{var x,g;const i=j(e=>e.isEditable.value),d=r.useRef(null),u=N(),m=r.useMemo(()=>u.pathname.split("/").slice(2).join("/"),[u.pathname]),n=()=>{const e=new Date;return`${e.getDate()}.${e.getMonth()+1}.${e.getFullYear()}`},[a,l]=b(m,[{date:n(),value:""}]),[t,o]=r.useState(0);r.useEffect(()=>{const e=d.current;e&&(e.style.height="auto",e.style.height=`${e.scrollHeight}px`)},[a,t]),r.useEffect(()=>{i||l(a.filter(e=>e.value.trim()!==""))},[i]);const h=e=>{console.log(`Current page: ${t}, Total pages: ${a.length}`),e?(a.length>t+1||l([...a,{date:n(),value:""}]),o(t+1)):t>0?o(t-1):alert("you cannot do this")},v=e=>{var p;const y=e.target.value,c=[...a];c[t]={date:((p=c[t])==null?void 0:p.date)||n(),value:y},l(c)};return s.jsxs("div",{className:"diary-container",onClick:e=>{i&&e.stopPropagation()},children:[s.jsxs("div",{className:"diary-header",children:[s.jsx("div",{style:{visibility:t===0?"hidden":"visible"},onClick:()=>h(!1),className:"arrow-container",children:s.jsx(f,{size:"5vh"})}),s.jsx("span",{className:"diary-date",children:(x=a[t])==null?void 0:x.date}),s.jsx("div",{style:{visibility:t===a.length-1&&!i?"hidden":"visible"},onClick:()=>h(!0),className:"arrow-container arrow-rotated",children:s.jsx(f,{size:"5vh"})})]}),s.jsx("div",{className:"diary-content",children:s.jsx("textarea",{disabled:!i,ref:d,className:"diary-textarea",placeholder:"Type in",value:((g=a[t])==null?void 0:g.value)||"",onChange:v,autoFocus:!0})})]})};export{T as default};
