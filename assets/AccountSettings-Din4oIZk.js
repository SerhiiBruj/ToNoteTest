import{r as i,u as k,b as v,j as e,e as C}from"./index-D0FHdcGl.js";const L=()=>{const[d,u]=i.useState([""]),[r,x]=i.useState(!1),s=k(t=>t.userData),[c,h]=i.useState(!1),[n,m]=i.useState({oldPassword:"",newPassword:""}),p=i.useCallback(t=>{m({...n,[t.target.name]:t.target.value})},[]);i.useEffect(()=>{d[0]===""&&(async()=>{try{console.log("reqForLastTimeSeenData");const a=await C.get("http://localhost:3000/entries",{headers:{userName:s.userName}});let g=new Array(a.data.length);for(let o=0;o<a.data.length;o++){let{client_time:S}=a.data[o];const l=new Date(S),j=String(l.getDate()).padStart(2,"0"),y=String(l.getMonth()+1).padStart(2,"0"),f=l.getFullYear(),b=String(l.getHours()).padStart(2,"0"),P=String(l.getMinutes()).padStart(2,"0"),N=`${b}:${P}  ${j}.${y}.${f}`;g.push(N)}u(g.filter(o=>o!=="").slice(0,10))}catch(a){console.log(a)}})()},[]);const w=v();return e.jsxs("div",{className:"settingsSection",children:[e.jsx("h1",{style:{fontSize:"40px"},children:"Account Settings"}),e.jsxs("p",{children:["Email: ",e.jsx("strong",{children:s==null?void 0:s.email})]}),e.jsxs("p",{children:["Username: ",e.jsx("strong",{children:s==null?void 0:s.userName})]}),e.jsxs("label",{style:{display:"flex",alignItems:"flex-start",flexDirection:"column"},children:[e.jsx("strong",{children:"Change password"}),e.jsx("div",{className:"passwordChange",style:{marginTop:"20px",display:"flex",alignItems:"center"},children:e.jsx("input",{type:"text",placeholder:"Old password",name:"oldPassword",style:{background:"lightgray",userSelect:"none",width:"fit-content",WebkitTextSecurity:c?"none":"disc"},className:"submit inputpas",value:n.oldPassword,onChange:t=>p(t)})}),e.jsx("input",{type:"text",placeholder:"New password",name:"newPassword",style:{background:"lightgray",userSelect:"none",margin:"20px 0px 20px 0px",width:"fit-content",WebkitTextSecurity:c?"none":"disc"},className:"submit inputpas",value:n.newPassword,onChange:t=>p(t)})]}),(n.newPassword||n.oldPassword)&&e.jsx("span",{style:{cursor:"pointer",textDecoration:"underline",width:"fit-content",userSelect:"none"},onClick:()=>h(!c),children:c?"Hide it":"Make it visible"}),e.jsx("br",{}),n.newPassword&&n.oldPassword&&e.jsx("button",{className:"submit",style:{marginTop:"20px",cursor:"pointer",width:"fit-content"},children:"Change"}),e.jsxs("div",{className:"lastTimeSeen",children:[e.jsx("br",{}),e.jsx("strong",{children:"Last time seen:"})," ",d[0],e.jsx("br",{}),e.jsx("b",{style:{cursor:"pointer",lineHeight:"50px",textDecoration:"underline"},onClick:()=>x(!r),children:r?"Hide":"Show  more attendance dates"}),e.jsx("div",{style:{transform:r?"scaleY(1)":"scaleY(0)",height:r?"auto":"0",transition:"all ease 0.1s",opacity:r?"1":"0",transformOrigin:"top",background:"#d3d3d31a",width:"fit-content",padding:"10px",borderRadius:"20px",outline:"1px solid gray"},children:d.map((t,a)=>e.jsx("div",{children:e.jsx("span",{className:"marker",children:t})},a))})]}),e.jsx("br",{}),e.jsx("button",{style:{marginTop:"20px",padding:"10px 20px",width:"fit-content"},onClick:()=>{localStorage.removeItem("token"),w("/authentification")},className:"submit",children:"Log out"})]})};export{L as default};
